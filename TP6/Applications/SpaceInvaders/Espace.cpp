/*
 * Espace.cpp
 *
 *  Created on: 17 oct. 2008
 *      Author: Aurélien
 */

#include "Espace.h"

Espace::Espace(FondEspace *f, Ecran *ec, TimerSpaceInvaders *t) {
	ecran = ec;
	fondEspace = f;
	timer = t;

	EntiteBase::setEspace(this);
	EntiteVide::setFondEspace(fondEspace);

	remplirEspaceVide();
	redessinerEspace();
}

Couleur Espace::getCouleurArPlan(){
	return fondEspace->getCouleurFondEspace();
}

Couleur Espace::getCouleurPrPlan(int ligne, int colonne){
	return fondEspace->getCouleurAt(ligne, colonne);
}


EntiteBase *Espace::getEntite(int ligne, int colonne){
	return espace[ligne*LARGEUR + colonne];
}

void Espace::setEntite(EntiteBase *entite, int ligne, int colonne){
	espace[ligne*LARGEUR + colonne] = entite;
}
void Espace::setEntite(EntiteBase *entite){
	entite->dessiner();
}


void Espace::setEntiteVide(int ligne, int colonne){
	espace[ligne*LARGEUR + colonne] = new EntiteVide(ligne, colonne);
}

void Espace::supprimerEntite(EntiteBase *entite){
	entite->effacer();
}

void Espace::remplirEspaceVide(){
	for(int ligne=1; ligne<HAUTEUR; ligne++){
		for(int colonne = 0; colonne<LARGEUR; colonne++){
			setEntiteVide(ligne, colonne);
		}
	}
}

void Espace::redessinerEspace(){
	for(int ligne=1; ligne<HAUTEUR; ligne++){
		for(int colonne = 0; colonne<LARGEUR; colonne++){
			if(getEntite(ligne, colonne)->getPositionLigne() == ligne &&
					getEntite(ligne, colonne)->getPositionColonne() == colonne)
				getEntite(ligne, colonne)->dessiner();
		}
	}
	ecran->afficherMot(0, 0, "|_Ascii-Invaders_!!________Score:_______Lives remaining:_______________________|", BLANC);
}
